plugins {
    id 'java';
    id 'io.qameta.allure' version '2.11.2'  // Плагин для Allure
}

repositories {
    mavenCentral()
}

dependencies {
    // Selenium для UI-тестов
    testImplementation 'org.seleniumhq.selenium:selenium-java:4.13.0'

    // Selenide (если требуется для облегчения работы с Selenium)
    // https://mvnrepository.com/artifact/com.codeborne/selenide
    implementation 'com.codeborne:selenide:7.4.3'


    // RestAssured для API-тестов (backend)
    // https://mvnrepository.com/artifact/io.rest-assured/rest-assured
    testImplementation 'io.rest-assured:rest-assured:5.5.0'


    // JUnit
    // https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.11.0'


    // Allure для интеграции с JUnit
    // https://mvnrepository.com/artifact/io.qameta.allure/allure-junit5
    testImplementation 'io.qameta.allure:allure-junit5:2.29.0'

    // AssertJ для улучшенных утверждений
    // https://mvnrepository.com/artifact/org.assertj/assertj-core
    testImplementation 'org.assertj:assertj-core:3.26.3'


    // WebDriver Manager для автоматического управления драйверами браузеров
    // https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager
    implementation 'io.github.bonigarcia:webdrivermanager:5.9.2'


    // SLF4J и Log4j для логирования
    // https://mvnrepository.com/artifact/org.slf4j/slf4j-api
    implementation 'org.slf4j:slf4j-api:2.0.16'

    // https://mvnrepository.com/artifact/org.slf4j/slf4j-api
    implementation 'org.slf4j:slf4j-api:2.0.16'
    testImplementation 'org.apache.logging.log4j:log4j-core:2.24.0'
}

test {
    useJUnitPlatform()

    // Конфигурация для работы с Allure отчетами
    finalizedBy 'allureReport'
}

allure {
    version = '2.29.0'  // Версия Allure
}

tasks.withType(Test).configureEach {
    useJUnitPlatform() // Если используете TestNG, если JUnit, то useJUnitPlatform()

    // Параметры для отчетов Allure
    systemProperty "allure.results.directory", "build/allure-results"
    finalizedBy "allureServe" // Генерация Allure отчетов после завершения тестов
}
